<item>
<title>xbmc input windows. Youtube Search 10 pages  (by twogun)</title>
<link>$doregex[makelist]</link>
<thumbnail>http://vignette3.wikia.nocookie.net/logopedia/images/7/76/Youtube-logo_2005-2009.jpg</thumbnail>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[makelist.param2]</title>
<link>$doregex[resolve]</link>
<thumbnail>https://i.ytimg.com/vi/[makelist.param1]/hqdefault.jpg</thumbnail>
]]></listrepeat>
<expres>u'(.+?)', u'(.+?)'</expres>
<page>$doregex[search]</page>
</regex>

<regex>
<name>resolve</name>
<expres><![CDATA[#$pyFunction
import urlresolver
def GetLSProData(page_data,Cookie_Jar,m):
 url = 'https://www.youtube.com/watch?v=[makelist.param1]'
 streamLink = urlresolver.resolve(url)
 return streamLink
]]></expres>
<page></page>
</regex>

<regex>
<name>search</name>
<expres><![CDATA[#$pyFunction
import requests,xbmcgui,xbmc, re,time, xbmcaddon
def GetLSProData(page_data,Cookie_Jar,m):

 text=takeInputFortext('Enter search string')
 url = 'https://www.youtube.com/results?q=' + text.replace(' ', '+')
 req = requests.get(url)
 list1 = re.findall('yt-lockup-c.+?a\shref=".watch.v=([^"]+)".+?\s\stitle="([^"]+)"\s', req.text)

 count = 10
 while count > 1:
   try:
     url = 'https://www.youtube.com' + re.findall('a href="([^"]+)".+<\/a>\n <\/div>', req.text)[0]
   except:
     return list1
   req = requests.get(url)
   list2 = re.findall('yt-lockup-c.+?a\shref=".watch.v=([^"]+)".+?\s\stitle="([^"]+)"\s', req.text)
   list1 = list1 + list2
   count = count - 1
 return list1

def takeInputFortext(txt):
 addon = xbmcaddon.Addon('plugin.video.live.streamspro')
 addon_version = addon.getAddonInfo('version')
 profile = xbmc.translatePath(addon.getAddonInfo('profile').decode('utf-8'))
 
 solver = InputWindow( txt=txt)
 solution = solver.get()
 return solution

class InputWindow(xbmcgui.WindowDialog):
    def __init__(self, *args, **kwargs):
        
        self.txt = kwargs.get('txt','')

        xbmcgui.WindowXMLDialog.__init__(self)
        #self.addControl(self.txt)
        path = xbmcaddon.Addon().getAddonInfo('path')
        self.kbd = xbmc.Keyboard()
        self.kbd.setHeading( self.txt)

    def get(self):
        self.show()
        time.sleep(2)
        self.kbd.doModal()
        if (self.kbd.isConfirmed()):
            text = self.kbd.getText()
            self.close()
            return text
        self.close()
        return False
]]></expres>
<page></page>
</regex>
</item>
<channels>

    <channel>
    <name>DOCUMENTALIA TV</name>
     <regex>
      <name>documentales</name
     <expres>u'(.+?)', u'(.+?)'</expres>
    <thumbnail>http://www.findjesus.tv/picture_library/findJesus.jpg</thumbnail>
    <fanart>http://goo.gl/dtB8T9</fanart>
        <items>
            <item>
                <title>$doregex[documentales]</title>
                <link>plugin://plugin.video.youtube/play/?video_id=$doregex[getID]</link>
                <regex>
                <name>getID</name>
                <expres>data-context-item-id="([^"]+)</expres>
                <page>https://www.youtube.com/channel/UCiwazSMPs2OQuljxifCvSiA</page>
               </regex>
                <thumbnail>https://i.ytimg.com/vi/[makelist.param1]/hqdefault.jpg</thumbnail>
                <fanart></fanart>
            </item>

            <item>
               <title>documentales sobre el Universo</title>
               <link>ignorme</link>
               <jsonrpc>plugin://plugin.video.youtube.com/watch?v=QVzXMDZ1xfs&list=PLmV3HGaGxSDyiKB7kbK8oubA7LOIngD1Z</jsonrpc>
               <thumbnail>https://i.ytimg.com/vi/b2yFnRyw558/hqdefault.jpg</thumbnail>
           </item>
        </items>
    </channel>
