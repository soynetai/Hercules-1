
<item>
<title>Buscador de documentales</title>
<link>$doregex[makelist]</link>
<thumbnail></thumbnail>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[makelist.param2]</title>
<link>$doregex[resolve]</link>
<thumbnail></thumbnail>
]]></listrepeat>
<expres>u'(.+?)', u'(.+?)'</expres>
<page>https://www.youtube.com/results?search_query=documentales+$doregex[search]</page>
</regex>

<regex>
<name>resolve</name>
<expres><![CDATA[#$pyFunction
import urlresolver
def GetLSProData(page_data,Cookie_Jar,m):
d = dialog.input('Buscar Documental:', type=xbmcgui.INPUT_ALPHANUM).replace(" ", "+")
url = 'https://www.youtube.com/results?q=' + text.replace(' ', '+')
req = requests.get(url)
list1 = re.findall('yt-lockup-c.+?a\shref=".watch.v=([^"]+)".+?\s\stitle="([^"]+)"\s', req.d)
count = 10
while count > 1:
try:
     url = 'https://www.youtube.com' + re.findall('a href="([^"]+)".+Next', req.d)[0]
   except:
     return list1
	  req = requests.get(url)
   list2 = re.findall('yt-lockup-c.+?a\shref=".watch.v=([^"]+)".+?\s\stitle="([^"]+)"\s', req.text)
   list1 = list1 + list2
   count = count - 1
 return list1

]]></expres>
<page></page>
</regex>


<regex>
<name>search</name>
<expres><![CDATA[#$pyFunction
import xbmc
import xbmcaddon
import xbmcgui
def GetLSProData(page_data,Cookie_Jar,m):
    dialog = xbmcgui.Dialog()
    d = dialog.input('Buscar Documental:', type=xbmcgui.INPUT_ALPHANUM).replace(" ", "+")
    return d
]]></expres>
<page></page>
<cookieJar></cookieJar>
</regex>


<page></page>
<cookieJar></cookieJar>
</regex>








</item>
